<mxfile host="Electron" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/27.0.2 Chrome/134.0.6998.205 Electron/35.3.0 Safari/537.36" version="27.0.2">
  <diagram name="软件模块层次结构图" id="software-architecture">
    <mxGraphModel dx="1492" dy="741" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="layer1_label" value="第一层：应用层" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#2c3e50;" parent="1" vertex="1">
          <mxGeometry x="50" y="90" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="layer2_label" value="第二层：功能模块层" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#2c3e50;" parent="1" vertex="1">
          <mxGeometry x="50" y="180" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="layer3_label" value="第三层：驱动层" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#2c3e50;" parent="1" vertex="1">
          <mxGeometry x="50" y="380" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="layer4_label" value="第四层：底层库" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#2c3e50;" parent="1" vertex="1">
          <mxGeometry x="50" y="680" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="main_module" value="主程序模块&#xa;(main.c)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="592.5" y="80" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="init_module" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;系统初始化模块&lt;br&gt;• 时钟配置&lt;br&gt;• 外设初始化&lt;br&gt;• 参数设置&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="245" y="200" width="150" height="100" as="geometry" />
        </mxCell>
        <mxCell id="smoke_module" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;烟雾检测模块&lt;br&gt;• 数据采集&lt;br&gt;• 浓度计算&lt;br&gt;• 分级控制&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="420" y="200" width="140" height="100" as="geometry" />
        </mxCell>
        <mxCell id="humidity_module" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;湿度控制模块&lt;br&gt;• 环境监测&lt;br&gt;• 智能调节&lt;br&gt;• 安全保护&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="600" y="200" width="135" height="100" as="geometry" />
        </mxCell>
        <mxCell id="display_module" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;显示管理模块&lt;br&gt;• 界面设计&lt;br&gt;• 数据显示&lt;br&gt;• 状态指示&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="760" y="200" width="140" height="100" as="geometry" />
        </mxCell>
        <mxCell id="comm_module" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;通信模块&lt;br&gt;• 串口通信&lt;br&gt;• 数据传输&lt;br&gt;• 协议处理&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcc99;strokeColor=#d79b00;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="930" y="200" width="140" height="100" as="geometry" />
        </mxCell>
        <mxCell id="hal_module" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;硬件抽象层&lt;br&gt;• GPIO控制&lt;br&gt;• ADC采集&lt;br&gt;• UART通信&lt;br&gt;• PWM输出&lt;br&gt;• I2C接口&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="200" y="420" width="120" height="100" as="geometry" />
        </mxCell>
        <mxCell id="sensor_driver" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;传感器驱动层&lt;br&gt;• 烟雾传感器&lt;br&gt;• DHT11温湿度&lt;br&gt;• 水位传感器&lt;br&gt;• 数据滤波&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="350" y="420" width="120" height="100" as="geometry" />
        </mxCell>
        <mxCell id="actuator_driver" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;执行器驱动层&lt;br&gt;• LED指示灯&lt;br&gt;• 蜂鸣器&lt;br&gt;• 风扇控制&lt;br&gt;• 伺服电机&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="500" y="420" width="120" height="100" as="geometry" />
        </mxCell>
        <mxCell id="display_driver" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;显示驱动层&lt;br&gt;• LCD1602驱动&lt;br&gt;• OLED驱动&lt;br&gt;• 字符显示&lt;br&gt;• 图形显示&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="650" y="420" width="120" height="100" as="geometry" />
        </mxCell>
        <mxCell id="comm_driver" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;通信驱动层&lt;br&gt;• UART驱动&lt;br&gt;• 数据缓冲&lt;br&gt;• 协议解析&lt;br&gt;• 错误处理&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcc99;strokeColor=#d79b00;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="800" y="420" width="120" height="100" as="geometry" />
        </mxCell>
        <mxCell id="timer_driver" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;定时器驱动层&lt;br&gt;• 系统定时&lt;br&gt;• PWM生成&lt;br&gt;• 任务调度&lt;br&gt;• 延时控制&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#666666;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="950" y="420" width="120" height="100" as="geometry" />
        </mxCell>
        <mxCell id="stm32_lib" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;STM32标准外设库&lt;br&gt;• GPIO库&lt;br&gt;• ADC库&lt;br&gt;• UART库&lt;br&gt;• TIM库&lt;br&gt;• I2C库&lt;br&gt;• DMA库&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="387.5" y="590" width="205" height="130" as="geometry" />
        </mxCell>
        <mxCell id="cmsis_lib" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;CMSIS库&lt;br&gt;• 内核访问&lt;br&gt;• 系统控制&lt;br&gt;• 中断管理&lt;br&gt;• 寄存器定义&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="720" y="590" width="220" height="130" as="geometry" />
        </mxCell>
        <mxCell id="edge1" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="main_module" target="init_module" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="630" y="170" as="sourcePoint" />
            <mxPoint x="320" y="210" as="targetPoint" />
            <Array as="points">
              <mxPoint x="665" y="160" />
              <mxPoint x="520" y="160" />
              <mxPoint x="320" y="160" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="edge2" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="main_module" target="smoke_module" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="660" y="170" as="sourcePoint" />
            <mxPoint x="490" y="210" as="targetPoint" />
            <Array as="points">
              <mxPoint x="665" y="140" />
              <mxPoint x="665" y="160" />
              <mxPoint x="490" y="160" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="edge3" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="main_module" target="humidity_module" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="675" y="170" as="sourcePoint" />
            <mxPoint x="660" y="210" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="edge4" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="main_module" target="display_module" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="705" y="170" as="sourcePoint" />
            <mxPoint x="830" y="210" as="targetPoint" />
            <Array as="points">
              <mxPoint x="665" y="160" />
              <mxPoint x="830" y="160" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="edge5" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="main_module" target="comm_module" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="670" y="120" as="sourcePoint" />
            <mxPoint x="1000" y="210" as="targetPoint" />
            <Array as="points">
              <mxPoint x="668" y="150" />
              <mxPoint x="668" y="160" />
              <mxPoint x="1000" y="160" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="edge6" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" target="hal_module" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="320" y="300" as="sourcePoint" />
            <mxPoint x="260" y="410" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="edge7" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="smoke_module" target="sensor_driver" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="462" y="310" as="sourcePoint" />
            <mxPoint x="410" y="410" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="edge8" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="smoke_module" target="actuator_driver" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="518" y="310" as="sourcePoint" />
            <mxPoint x="560" y="410" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="edge9" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="humidity_module" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="618" y="310" as="sourcePoint" />
            <mxPoint x="410" y="420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="edge10" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="humidity_module" target="actuator_driver" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="660" y="310" as="sourcePoint" />
            <mxPoint x="524" y="410" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="edge11" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="humidity_module" target="display_driver" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="702" y="310" as="sourcePoint" />
            <mxPoint x="674" y="410" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="edge12" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="display_module" target="display_driver" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="830" y="310" as="sourcePoint" />
            <mxPoint x="746" y="410" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="edge13" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.421;exitY=1.006;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitPerimeter=0;" parent="1" source="comm_module" target="comm_driver" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="972" y="310" as="sourcePoint" />
            <mxPoint x="860" y="410" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="edge14" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="comm_module" target="timer_driver" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1028" y="310" as="sourcePoint" />
            <mxPoint x="1010" y="410" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="edge15" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.45;entryY=-0.015;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="hal_module" target="stm32_lib" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="260" y="530" as="sourcePoint" />
            <mxPoint x="440" y="710" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="edge16" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.46;entryY=0.015;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="sensor_driver" target="stm32_lib" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="410" y="530" as="sourcePoint" />
            <mxPoint x="480" y="710" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="edge17" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.45;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="actuator_driver" target="stm32_lib" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="560" y="530" as="sourcePoint" />
            <mxPoint x="520" y="710" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="edge18" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.45;entryY=0.005;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="display_driver" target="stm32_lib" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="710" y="530" as="sourcePoint" />
            <mxPoint x="560" y="710" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="edge19" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.3;exitY=1;exitDx=0;exitDy=0;entryX=0.473;entryY=-0.017;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="comm_driver" target="stm32_lib" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="836" y="530" as="sourcePoint" />
            <mxPoint x="490" y="690" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="edge20" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.7;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="comm_driver" target="cmsis_lib" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="884" y="530" as="sourcePoint" />
            <mxPoint x="690" y="710" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="edge21" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.3;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="timer_driver" target="cmsis_lib" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="986" y="530" as="sourcePoint" />
            <mxPoint x="810" y="710" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="separator1" value="" style="endArrow=none;dashed=1;html=1;dashPattern=5 5;strokeWidth=2;rounded=0;strokeColor=#cccccc;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="200" y="300" as="sourcePoint" />
            <mxPoint x="1100" y="300" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="separator2" value="" style="endArrow=none;dashed=1;html=1;dashPattern=5 5;strokeWidth=2;rounded=0;strokeColor=#cccccc;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="190" y="520" as="sourcePoint" />
            <mxPoint x="1090" y="520" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="separator3" value="" style="endArrow=none;dashed=1;html=1;dashPattern=5 5;strokeWidth=2;rounded=0;strokeColor=#cccccc;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="200" y="718.75" as="sourcePoint" />
            <mxPoint x="1100" y="718.75" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
